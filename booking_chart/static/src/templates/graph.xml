<template>


<t t-name="Booking.Graph.resources">
    <t t-foreach="groups" t-as="group">
        
        <div class="resource-group hidden" 
             t-att-group-index="group.options.index" 
             t-att-start="group.period().start('s')"
             t-att-end="group.period().end('s')"
             t-att-item-id="group.resource_id" >
            
            
            <t t-if="group.length == 1">
                    <div t-att-class="'resource-group-bar single ' + group.at(0).get('css_class')"
                         t-att-title="group.getTitle()"
                         t-att-style="'width:' + group.period().duration() + 'em'">
                        <t t-foreach="group.getImageListModel(group.models[0].get('tags_name'))" t-as="image">
                            <i t-att-class="'logo_of_item ' + image " ></i>
                         </t>
                        <span class="ellipsis graph-name">
                            <t t-esc="group.mergeAttr('name', ', ', (group.period().duration() * 3))" /></span>
                    </div>
            </t>

            <t t-if="group.length > 1">
                <div class="resource-group-bar multi"
                     t-att-style="'width:' + group.period().duration() + 'em'" >
                    <i class="icon-plus-sign-alt graph-button-plus" ></i>
                    <i class="icon-minus-sign-alt graph-button-minus" ></i>
                    <!-- Image List -->
                    <t t-foreach="group.getImageList()" t-as="image">
                        <i t-att-class="'logo_of_group ' + image " ></i>
                    </t>
                   <span class="ellipsis graph-name">
                       <t t-esc="'(' + group.length +')' + ' ' + group.mergeAttr('name', ', ', (group.period().duration() * 3))" />
                   </span>
                </div>
            </t>
            
        
            <div class="resource-group-detail">
                
                <t t-set="top" t-value="1" />
                
                <t t-foreach="group.models" t-as="model">
                <div t-att-origin-model="model.get('origin_model')" 
                     t-att-origin-id="model.get('origin_id')"
                     t-att-class="'resource-group-element ' + model.get('css_class')"
                     t-att-title="model.get('name') + '\n' + model.get('message')"
                     t-att-style="
                        'width:' + model.duration() + 'em;' +
                        'left:' + (model.diff(group.period().start())) + 'em;' +
                        'top:'  + (top++ * 24) + 'px;'
                        ">
                    <t t-if="model.get('tags_name').length > 0">
                        <t t-foreach="group.getImageListModel(model.get('tags_name'))" t-as="image">
                            <i t-att-class="'logo_of_item ' + image " ></i>
                        </t>
                    </t>

                    <span><t t-esc="model.get('name')" /></span>
                </div>    
                </t>    
            </div>
        </div>
        
    </t>
</t>


</template>